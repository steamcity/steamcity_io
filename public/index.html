<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SteamCity IoT Platform</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
</head>

<body>
    <!-- Homepage -->
    <div id="homepage" class="homepage">
        <header class="hero-section">
            <div class="hero-content">
                <img src="steamcity-official.jpg" alt="SteamCity" class="hero-logo">
                <h1>SteamCity IoT Platform</h1>
                <p class="hero-subtitle">Plateforme √©ducative europ√©enne pour l'exploration de donn√©es urbaines
                    connect√©es</p>
                <p class="hero-description">D√©couvrez comment les capteurs IoT transforment nos villes √† travers des
                    exp√©riences interactives men√©es dans toute l'Europe. Une initiative p√©dagogique pour comprendre la
                    ville intelligente de demain.</p>
                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-number">55</span>
                        <span class="stat-label">Exp√©riences</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">1700+</span>
                        <span class="stat-label">Mesures capteurs</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">38</span>
                        <span class="stat-label">Villes europ√©ennes</span>
                    </div>
                </div>
                <button id="explore-btn" class="cta-button">Explorer les donn√©es</button>
            </div>
        </header>

        <section class="features-section">
            <div class="container">
                <h2>Clusters d'exp√©rimentation SteamCity</h2>
                <div class="protocols-grid">
                    <div class="protocol-card governance">
                        <div class="protocol-icon">üèõÔ∏è</div>
                        <h3>Gouvernance et citoyennet√©</h3>
                        <p>Exploration des m√©canismes de participation citoyenne et de gouvernance num√©rique pour
                            am√©liorer l'engagement communautaire et la transparence des processus d√©mocratiques urbains.
                        </p>
                    </div>
                    <div class="protocol-card environmental">
                        <div class="protocol-icon">üå±</div>
                        <h3>Qualit√© environnementale, climat et bien-√™tre</h3>
                        <p>√âtude de la qualit√© de l'air, du bruit urbain, de la biodiversit√© et des espaces verts pour
                            comprendre l'impact environnemental sur le bien-√™tre des citoyens et d√©velopper des
                            solutions durables.</p>
                    </div>
                    <div class="protocol-card mobility">
                        <div class="protocol-icon">üöó</div>
                        <h3>Mobilit√©</h3>
                        <p>Analyse des flux de transport, de l'accessibilit√© urbaine et des solutions de mobilit√©
                            intelligente pour optimiser les d√©placements et r√©duire l'empreinte carbone des villes.</p>
                    </div>
                    <div class="protocol-card energy">
                        <div class="protocol-icon">‚ö°</div>
                        <h3>√âconomies d'√©nergie</h3>
                        <p>Investigation des strat√©gies d'efficacit√© √©nerg√©tique, des √©nergies renouvelables et des
                            r√©seaux intelligents pour cr√©er des villes plus durables et √©conomes en √©nergie.</p>
                    </div>
                    <div class="protocol-card technology">
                        <div class="protocol-icon">üíª</div>
                        <h3>IA et technologies</h3>
                        <p>Exploration de l'intelligence artificielle, de l'Internet des objets (IoT) et des
                            technologies √©mergentes pour d√©velopper des solutions innovantes aux d√©fis urbains
                            contemporains.</p>
                    </div>
                    <div class="protocol-card cta-card">
                        <div class="protocol-icon">üî¨</div>
                        <h3>Centre d'exp√©rimentation</h3>
                        <p>D√©couvrez nos outils p√©dagogiques interactifs et ressources √©ducatives pour explorer les
                            enjeux de la ville intelligente avec vos √©l√®ves.</p>
                        <a href="https://view.genially.com/68627d9b236102fc0d8e9b77" target="_blank" rel="noopener"
                            class="card-cta-button">
                            Explorez nos outils
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <footer class="homepage-footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <img src="eu-funded-logo.png" alt="Funded by the European Union" class="eu-logo">
                        <p>Funded by the European Union. Views and opinions expressed are however those of the author(s)
                            only and do not necessarily reflect those of the European Union or the European Education
                            and Culture Executive Agency (EACEA). Neither the European Union nor EACEA can be held
                            responsible for them.</p>
                    </div>
                    <div class="footer-section">
                        <h4>Partenaires europ√©ens</h4>
                        <div class="partners-list">
                            <a href="https://www.labaixbidouille.com/" target="_blank" rel="noopener">L.A.B</a>
                            <a href="https://www.lascientotheque.be/" target="_blank" rel="noopener">La
                                Scientoth√®que</a>
                            <a href="https://www.7vents.fr/" target="_blank" rel="noopener">7 Vents</a>
                            <a href="https://www.zeugma.bg/" target="_blank" rel="noopener">Zeugma</a>
                            <a href="https://www.edutech.bg/en/home-english/" target="_blank" rel="noopener">EduTech</a>
                            <a href="https://www.perlatecnica.it/" target="_blank" rel="noopener">Perla Tecnica</a>
                            <a href="https://fr.vittascience.com/" target="_blank" rel="noopener">Vittascience</a>
                            <a href="https://ultra-lab.net/" target="_blank" rel="noopener">Ultra Lab</a>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Connexion √† la plateforme</h2>
            <form id="login-form">
                <input type="text" id="username" placeholder="Nom d'utilisateur" required>
                <input type="password" id="password" placeholder="Mot de passe" required>
                <button type="submit">Se connecter</button>
            </form>
        </div>
    </div>

    <!-- Main Application -->
    <div id="main-app" class="hidden">
        <header class="app-header">
            <div class="header-left">
                <img src="steamcity-official.jpg" alt="SteamCity" class="app-logo">
                <div class="title-container">
                    <h1 class="app-title">
                        <span class="title-main">SteamCity</span>
                        <span class="title-sub">IoT Platform</span>
                    </h1>
                    <div class="title-tagline">Plateforme √©ducative europ√©enne</div>
                </div>
            </div>
            <nav class="main-nav">
                <button id="map-tab" class="nav-button active">üó∫Ô∏è Carte</button>
                <button id="experiments-tab" class="nav-button">üî¨ Exp√©riences</button>
                <button id="sensors-tab" class="nav-button">üì° Capteurs</button>
                <button id="data-tab" class="nav-button">üìä Donn√©es</button>
            </nav>
            <button id="logout-btn" class="logout-btn">D√©connexion</button>
        </header>

        <main class="app-main">
            <!-- Loading screen -->
            <div id="loading-screen" class="view active">
                <div class="loading-content">
                    <div class="loading-spinner"></div>
                    <h2>Chargement en cours...</h2>
                    <p>Initialisation de la plateforme SteamCity</p>
                </div>
            </div>

            <!-- Map View (Default) -->
            <div id="map-view" class="view">
                <div class="map-controls">
                    <div class="filter-panel">
                        <h3>Filtres</h3>
                        <select id="protocol-filter">
                            <option value="">Tous les clusters</option>
                            <option value="environmental">üå± Qualit√© environnementale, climat et bien-√™tre</option>
                            <option value="energy">‚ö° √âconomies d'√©nergie</option>
                            <option value="mobility">üöó Mobilit√©</option>
                            <option value="governance">üèõÔ∏è Gouvernance et citoyennet√©</option>
                            <option value="technology">üíª IA et technologies</option>
                        </select>
                        <div id="map-legend" class="legend"></div>
                    </div>
                </div>
                <div id="map" class="interactive-map">
                    <button id="center-map-btn" class="center-map-floating">‚åó</button>
                </div>
            </div>

            <!-- Experiment Detail View -->
            <div id="experiment-detail-view" class="view">
                <div class="detail-content">
                    <div class="experiment-title-section">
                        <div class="title-header">
                            <h2 id="experiment-detail-title">D√©tail de l'exp√©rience</h2>
                            <button id="back-to-map" class="back-button">‚Üê Retour √† la liste</button>
                        </div>
                        <div id="experiment-info"></div>
                    </div>

                    <div class="experiment-details-grid">
                        <div class="left-column">
                            <div class="sensors-section">
                                <h3>Capteurs utilis√©s</h3>
                                <div id="experiment-sensors" class="sensors-grid"></div>
                            </div>
                            <div class="methodology-section">
                                <h3>M√©thodologie</h3>
                                <div id="experiment-methodology" class="methodology-content"></div>
                            </div>
                        </div>

                        <div class="right-column">
                            <div class="hypotheses-section">
                                <h3>Hypoth√®ses</h3>
                                <div id="experiment-hypotheses" class="hypotheses-content"></div>
                            </div>
                            <div class="conclusions-section">
                                <h3>Conclusions</h3>
                                <div id="experiment-conclusions" class="conclusions-content"></div>
                            </div>
                        </div>
                    </div>

                    <div class="charts-section">
                        <div class="charts-header">
                            <h3>Donn√©es en temps r√©el</h3>
                            <div class="charts-controls">
                                <div class="time-filter-controls">
                                    <button class="time-filter-btn active" data-period="24h">24h</button>
                                    <button class="time-filter-btn" data-period="7d">7j</button>
                                    <button class="time-filter-btn" data-period="30d">30j</button>
                                    <button class="time-filter-btn" data-period="all">Tout</button>
                                </div>
                                <button id="open-in-data-view" class="open-data-btn" title="Ouvrir dans la vue donn√©es">
                                    üìà Vue d√©taill√©e
                                </button>
                            </div>
                        </div>
                        <div id="experiment-charts"></div>
                    </div>
                </div>
            </div>

            <!-- Experiments List View -->
            <div id="experiments-view" class="view">
                <div class="experiments-filter-panel">
                    <h2>Toutes les exp√©riences</h2>

                    <!-- Search-like filter activation button -->
                    <div class="filter-search-box" id="experiments-filter-search-box">
                        <div class="search-input-container">
                            <span class="search-icon">üîç</span>
                            <input type="text" id="experiments-filter-input" class="search-input"
                                placeholder="Rechercher ou filtrer les exp√©riences..." readonly>
                            <span class="filter-count" id="experiments-filter-count" style="display: none;">0 filtres
                                actifs</span>
                        </div>
                    </div>

                    <!-- Basic filters (hidden by default) -->
                    <div class="filter-section" id="experiments-basic-filters" style="display: none;">
                        <div id="experiments-legend" class="experiments-legend"></div>
                        <div class="sensor-filter-section">
                            <button id="sensor-filter-btn" class="sensor-filter-btn" data-active="false">
                                üìä Avec capteurs uniquement
                            </button>
                        </div>
                    </div>

                    <!-- All other filters (hidden by default) -->
                    <div id="additional-filters" class="additional-filters" style="display: none;">
                        <!-- Collapsible: Location filters -->
                        <div class="filter-section collapsible">
                            <h4 class="filter-toggle" data-target="location-filters">
                                <span class="toggle-icon">‚ñ∂</span> Par localisation
                            </h4>
                            <div id="location-filters" class="filter-content" style="display: none;">
                                <div class="filters-row">
                                    <div class="filter-group">
                                        <label for="country-filter">Pays :</label>
                                        <select id="country-filter">
                                            <option value="">Tous les pays</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label for="city-filter">Ville :</label>
                                        <select id="city-filter">
                                            <option value="">Toutes les villes</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label for="school-filter">√âcole :</label>
                                        <select id="school-filter">
                                            <option value="">Toutes les √©coles</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Collapsible: Project filters -->
                        <div class="filter-section collapsible">
                            <h4 class="filter-toggle" data-target="project-filters">
                                <span class="toggle-icon">‚ñ∂</span> Par projet
                            </h4>
                            <div id="project-filters" class="filter-content" style="display: none;">
                                <div class="filters-row">
                                    <div class="filter-group">
                                        <label for="status-filter">Statut :</label>
                                        <select id="status-filter">
                                            <option value="">Tous les statuts</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label for="experiment-protocol-filter">Protocole :</label>
                                        <select id="experiment-protocol-filter">
                                            <option value="">Tous les protocoles</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Collapsible: Date filters -->
                        <div class="filter-section collapsible">
                            <h4 class="filter-toggle" data-target="date-filters">
                                <span class="toggle-icon">‚ñ∂</span> Par date
                            </h4>
                            <div id="date-filters" class="filter-content" style="display: none;">
                                <div class="filters-row">
                                    <div class="filter-group">
                                        <label for="start-date-filter">Date de d√©but :</label>
                                        <input type="date" id="start-date-filter">
                                    </div>
                                    <div class="filter-group">
                                        <label for="end-date-filter">Date de fin :</label>
                                        <input type="date" id="end-date-filter">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Clear filters button -->
                        <div class="filter-actions">
                            <button id="clear-filters-btn" class="clear-filters-btn">Effacer tous les filtres</button>
                        </div>
                    </div>
                </div>
                <div id="experiments-list" class="experiments-grid"></div>
            </div>

            <!-- Data View -->
            <div id="data-view" class="view">
                <div class="data-filter-panel">
                    <h2>üìä Analyse des donn√©es</h2>

                    <!-- Search-like filter activation button -->
                    <div class="filter-search-box" id="data-filter-search-box">
                        <div class="search-input-container">
                            <span class="search-icon">üîç</span>
                            <input type="text" id="data-filter-input" class="search-input"
                                placeholder="Rechercher ou filtrer les donn√©es..." readonly>
                            <span class="filter-count" id="data-filter-count" style="display: none;">0 filtres
                                actifs</span>
                        </div>
                    </div>

                    <!-- Additional filters container (initially hidden) -->
                    <div id="data-additional-filters" class="additional-filters" style="display: none;">
                        <div id="data-basic-filters" class="filters-row">
                            <div class="filter-group">
                                <label for="experiment-select">üî¨ Exp√©rience</label>
                                <select id="experiment-select" class="form-select">
                                    <option value="">Toutes les exp√©riences</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="sensor-type-select">üìä Type de capteur</label>
                                <select id="sensor-type-select" class="form-select">
                                    <option value="">Tous les types</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="data-period-select">üìÖ P√©riode</label>
                                <select id="data-period-select" class="form-select">
                                    <option value="all">Toutes les donn√©es</option>
                                    <option value="24h">Derni√®res 24h</option>
                                    <option value="7d">7 derniers jours</option>
                                    <option value="30d">30 derniers jours</option>
                                </select>
                            </div>
                        </div>

                        <!-- Advanced time filters (can be expanded later) -->
                        <div class="filters-row" style="margin-top: 1rem;">
                            <div class="filter-group">
                                <label for="data-start-date">üìÖ Date d√©but</label>
                                <input type="date" id="data-start-date" class="form-select">
                            </div>
                            <div class="filter-group">
                                <label for="data-end-date">üìÖ Date fin</label>
                                <input type="date" id="data-end-date" class="form-select">
                            </div>
                            <div class="filter-group">
                                <label for="data-min-quality">‚≠ê Qualit√© min.</label>
                                <select id="data-min-quality" class="form-select">
                                    <option value="">Toutes</option>
                                    <option value="0.9">Excellente (90%+)</option>
                                    <option value="0.8">Bonne (80%+)</option>
                                    <option value="0.7">Correcte (70%+)</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="data-limit">üìà Limite</label>
                                <select id="data-limit" class="form-select">
                                    <option value="">Toutes</option>
                                    <option value="100">100 points</option>
                                    <option value="500">500 points</option>
                                    <option value="1000">1000 points</option>
                                </select>
                            </div>
                        </div>
                        <div class="filters-row" style="margin-top: 1rem;">
                            <button id="data-clear-filters-btn" class="clear-filters-btn">üóëÔ∏è Effacer les
                                filtres</button>
                            <button id="data-apply-filters-btn" class="apply-filters-btn">üîç Appliquer les
                                filtres</button>
                        </div>
                    </div>
                </div>

                <div id="chart-container">
                    <canvas id="dataChart"></canvas>
                </div>

                <!-- Statistical indicators panel -->
                <div id="data-stats-panel" class="stats-panel" style="display: none;">
                    <div class="stats-header">
                        <h3>üìä Indicateurs statistiques par capteur</h3>
                        <button id="view-experiment-details" class="view-details-btn"
                            title="Voir les d√©tails de l'exp√©rience s√©lectionn√©e" disabled>
                            üîç D√©tails de l'exp√©rience
                        </button>
                    </div>
                    <div id="stats-by-sensor" class="stats-by-sensor">
                        <!-- Statistics will be generated dynamically for each sensor type -->
                    </div>

                    <!-- Global stats -->
                    <div class="global-stats">
                        <h4>üìà Statistiques g√©n√©rales</h4>
                        <div class="stats-grid global-grid">
                            <div class="stat-card">
                                <div class="stat-icon">üìà</div>
                                <div class="stat-content">
                                    <div class="stat-label">Points de donn√©es total</div>
                                    <div class="stat-value" id="stat-total-points">-</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üìÖ</div>
                                <div class="stat-content">
                                    <div class="stat-label">P√©riode couverte</div>
                                    <div class="stat-value" id="stat-time-range">-</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">‚≠ê</div>
                                <div class="stat-content">
                                    <div class="stat-label">Qualit√© moyenne</div>
                                    <div class="stat-value" id="stat-avg-quality">-</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üéØ</div>
                                <div class="stat-content">
                                    <div class="stat-label">Types de capteurs</div>
                                    <div class="stat-value" id="stat-sensor-types">-</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sensor Detail View -->
            <div id="sensor-detail-view" class="view">
                <div class="detail-content">
                    <div class="sensor-title-section">
                        <div class="title-header">
                            <h2 id="sensor-detail-title">D√©tail du capteur</h2>
                            <button id="back-to-sensors" class="back-button">‚Üê Retour aux capteurs</button>
                        </div>
                        <div id="sensor-info"></div>
                    </div>

                    <div class="sensor-details-grid">
                        <div class="left-column">
                            <div class="sensor-specifications-section">
                                <h3>Sp√©cifications techniques</h3>
                                <div id="sensor-specifications" class="specifications-content"></div>
                            </div>
                            <div class="sensor-status-section">
                                <h3>√âtat du capteur</h3>
                                <div id="sensor-status-info" class="status-content"></div>
                            </div>
                        </div>

                        <div class="right-column">
                            <div class="sensor-location-section">
                                <h3>Localisation</h3>
                                <div id="sensor-location-info" class="location-content"></div>
                            </div>
                            <div class="sensor-calibration-section">
                                <h3>Calibrage</h3>
                                <div id="sensor-calibration-info" class="calibration-content"></div>
                            </div>
                        </div>
                    </div>

                    <div class="charts-section">
                        <div class="sensor-chart-header">
                            <h3>üìä Mesures r√©centes</h3>
                            <div class="charts-controls">
                                <div class="time-filter-controls">
                                    <button class="time-filter-btn active" data-period="24h">24h</button>
                                    <button class="time-filter-btn" data-period="7d">7j</button>
                                    <button class="time-filter-btn" data-period="30d">30j</button>
                                    <button class="time-filter-btn" data-period="all">Tout</button>
                                </div>
                                <button id="open-sensor-in-data-view-header" class="view-details-btn"
                                    title="Ouvrir dans la vue donn√©es">
                                    üìà Analyse d√©taill√©e
                                </button>
                            </div>
                        </div>
                        <div id="sensor-chart-container">
                            <canvas id="sensorChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sensors View -->
            <div id="sensors-view" class="view">
                <div class="sensors-filter-panel">
                    <h2>Gestion des capteurs</h2>


                    <!-- Search-like filter activation button -->
                    <div class="filter-search-box" id="sensors-filter-search-box">
                        <div class="search-input-container">
                            <span class="search-icon">üîç</span>
                            <input type="text" id="sensors-filter-input" class="search-input"
                                placeholder="Rechercher ou filtrer les capteurs..." readonly>
                            <span class="filter-count" id="sensors-filter-count" style="display: none;">0 filtres
                                actifs</span>
                        </div>
                    </div>

                    <!-- Additional filters container (initially hidden) -->
                    <div id="sensors-additional-filters" class="additional-filters" style="display: none;">
                        <div class="filters-row">
                            <div class="filter-group">
                                <label for="sensors-experiment-filter">üî¨ Exp√©rience</label>
                                <select id="sensors-experiment-filter" class="form-select">
                                    <option value="">Toutes les exp√©riences</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="sensors-status-filter">üìä Statut</label>
                                <select id="sensors-status-filter" class="form-select">
                                    <option value="">Tous les statuts</option>
                                    <option value="active">Actif</option>
                                    <option value="maintenance">Maintenance</option>
                                    <option value="offline">Hors ligne</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="sensors-type-filter">üîß Type de capteur</label>
                                <select id="sensors-type-filter" class="form-select">
                                    <option value="">Tous les types</option>
                                </select>
                            </div>
                            <button id="sensors-clear-filters" class="clear-filters-btn">üóëÔ∏è Effacer les
                                filtres</button>
                        </div>
                    </div>
                </div>

                <!-- Sensors grid container -->
                <div id="sensors-container" class="sensors-grid-container">
                    <div class="loading-message">
                        Chargement des capteurs...
                    </div>
                </div>

                <!-- Sensor detail modal -->
                <div id="sensor-detail-modal" class="sensor-modal" style="display: none;">
                    <div class="sensor-modal-content">
                        <div class="sensor-modal-header">
                            <h3 id="sensor-modal-title">D√©tails du capteur</h3>
                            <button class="sensor-modal-close">&times;</button>
                        </div>
                        <div class="sensor-modal-body">
                            <div id="sensor-details-content">
                                <!-- Sensor details will be populated here -->
                            </div>
                            <div id="sensor-chart-container">
                                <canvas id="sensor-detail-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script type="module" src="js/main.js"></script>
</body>

</html>